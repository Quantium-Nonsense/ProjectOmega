dist: trusty
os: linux

language: node_js

node_js:
  - "10.9"

addons:
  chrome: stable

cache:
  directories:
    - "./node_modules"
    - "~/.npm"
    - ".jest"

env:
  - FRONTEND=AdminClient/
  - FRONTEND=RepClient/

stages:
  - test
  - coverage
#  - name: deploy
#    if: branch = master

jobs:
  include:
    - stage: test
      before_install: cd $FRONTEND
      script: npm run test -- --no-watch --no-progress --code-coverage=true --browsers=ChromeHeadlessCI
    - stage: coverage
      before_install: skip
      install: skip
      script: npx codecov
